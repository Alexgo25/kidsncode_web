!function(){var o,s=$(".js-platform"),e=s.find(".js-platform-cube");s.find(".js-platform-cube-moveable");(o=function(){for(var o=0;o<e.length;o++)e.eq(o).css("zIndex",o+1)})()}(),function(){var o,s,e,l,i,a=$(".js-loop-slider"),n=a.find(".js-loop-slider-left"),r=a.find(".js-loop-slider-right"),t=a.find(".js-loop-slider-elements"),p=$(document.body),d=!0;p.on({click:function(){if("right-false"!==i()&&d){d=!1,o=a.find(".js-loop-slider-element");for(var n=0;n<o.length;n++)o.eq(n).hasClass("is-active")?(s=o.eq(n),e=s.data("index"),l='<div class="panel-controls__loop-element js-loop-slider-element is-active" data-index="'+(e+1)+'">'+(e+1)+"</div>",s.css("marginLeft","-100%").removeClass("is-active").addClass("is-left"),t.append(l)):(o.eq(n).hasClass("is-left")||o.eq(n).hasClass("is-right"))&&o.eq(n).remove();i()}}},".js-loop-slider-right"),p.on({click:function(){if("left-false"!==i()&&d){d=!1,o=a.find(".js-loop-slider-element");for(var n=0;n<o.length;n++)o.eq(n).hasClass("is-active")?(s=o.eq(n),e=s.data("index"),l='<div class="panel-controls__loop-element js-loop-slider-element is-active is-margin-left" data-index="'+(e-1)+'">'+(e-1)+"</div>",t.prepend(l),s.removeClass("is-active").addClass("is-right"),setTimeout(function(){a.find(".is-margin-left").removeClass("is-margin-left")},2)):(o.eq(n).hasClass("is-left")||o.eq(n).hasClass("is-right"))&&o.eq(n).remove();i()}}},".js-loop-slider-left"),p.on({transitionend:function(){d=!0}},".js-loop-slider-element"),(i=function(){o=a.find(".js-loop-slider-element");for(var s=0;s<o.length;s++)if(o.eq(s).hasClass("is-active")){if(1===o.eq(s).data("index"))return n.addClass("is-disabled"),"left-false";if(20===o.eq(s).data("index"))return r.addClass("is-disabled"),"right-false"}else n.removeClass("is-disabled"),r.removeClass("is-disabled")})()}(),function(){var o={body:$(document.body),robot:$(".js-robot"),program:$(".js-program"),controls:$(".js-controls"),loop:$(".js-loop")},s={newLoop:[]},e={setEvents:function(){o.robot.on({click:function(){$(this).toggleClass("is-select")}}),o.robot.on({click:function(s){s.preventDefault(),s.stopPropagation();var e=$(this).data("action"),l='<div class="panel-program__action js-program-action" data-action="'+e+'"></div>';o.program.find(".js-program-actions").append(l)}},".js-robot-action"),o.program.on({click:function(){$(this).parents(".js-program-loop").length||($(this).toggleClass("is-loopy"),e.openLoopControl(),s.newLoop.push($(this).removeClass("is-loop")))}},".js-program-action"),o.loop.on({click:function(){var s,e=o.program.find(".js-program-action.is-loopy"),l=e.first(),i=o.controls.find(".js-loop-slider-element.is-active").data("index");l.before('<div class="panel-program__loop js-program-loop is-new" data-index="'+i+'"><div class="panel-program__loop-angle js-program-loop-angle"><div class="panel-program__loop-horizontal"></div><div class="panel-program__loop-vertical js-program-loop-angle-vertical"></div><div class="panel-program__loop-title js-program-loop-angle-title"></div></div></div>'),s=o.program.find(".js-program-loop.is-new"),s.append(e.removeClass("is-loopy")),o.controls.removeClass("is-loop"),setTimeout(function(){s.find(".js-program-loop-angle-title").append("ПОВТОРИТЬ x"+i),s.find(".js-program-loop-angle").addClass("is-open"),s.find(".js-program-loop-angle-vertical").css("min-height",48+40*e.length+"px"),s.removeClass("is-new")},500)}},".js-loop-submit"),o.loop.on({click:function(){s.newLoop=[],o.controls.removeClass("is-loop")}},".js-loop-cancel")},openLoopControl:function(){var s=o.program.find(".js-program-action.is-loopy");s.length>0?o.controls.addClass("is-loop"):o.controls.removeClass("is-loop")}};e.setEvents()}();